%only for gray image
clear;
f=imread('rice.png');
if isa(f,'double')==0
    f=im2double(f);
end
[M,N]=size(f);

x=linspace(-M,M,2*M);
y=linspace(-N,N,2*N);
[X,Y]=meshgrid(y,x);

D=sqrt(M.*M+N.*N);
sigma=D/10;

n=1;
Z=1./(1+(sqrt(X.*X+Y.*Y)./sigma).^(2*n));
mesh(X,Y,Z);

F=fft2(f,2*M,2*N);
H=fftshift(Z);
figure,mesh(H);
FH=F.*H;
g=abs(ifft2(FH));

figure,imshow(g(1:M,1:N));